name: publish

on:
  workflow_dispatch:
  push:

jobs:
  publish:
    runs-on: ubuntu-latest
    container:
      image: cimg/openjdk:11.0.22

    steps:
      - name: Checkout
        uses: actions/checkout@v4
    
      - name: Build
        run: mvn package install javadoc:jar source:jar

      - name: Publish
        uses: cdivitotawela/example-publish-maven-central/.github/actions/central-publish@main
        with:
          gpg-base64-key: ${{ secrets.GPG_BASE64_KEY }}
          gpg-passphrase: ${{ secrets.GPG_PASSPHRASE }}
          central-username: ${{ secrets.CENTRAL_USERNAME }}
          central-password: ${{ secrets.CENTRAL_PASSWORD }}

